<% include partials/header %>

<% var test = (foundPoll); %>
<% var dataArray = dataArray; %>
<% var test = (foundPoll); %>

<div class="text-center">
<h1><strong><%= foundPoll.pollName %></strong></h1>
  <hr>
  <h3>You Have Voted For: <strong><em><%= storedCookie %></strong></em></h3>
  </div>




<div class="container text-center">
      <canvas id="myChart" width="300" height="300"></canvas>
</div>


<script type='text/javascript'>
var foundPoll = <%- JSON.stringify(test)%>;
var dataArray = <%- JSON.stringify(dataArray) %>;


function randomNumber(){
  return Math.floor(Math.random() * 256);
}
var labels = [];
var howMany = [];
var backColor = [];
console.log(dataArray);
for(var i = 0 ; i < dataArray.length; i ++){
labels.push(dataArray[i][0]);
howMany.push(dataArray[i][1]);
backColor.push('rgba('+randomNumber()+', '+ randomNumber()+ ', ' + randomNumber()+', 0.8)');

}

  var ctx = document.getElementById("myChart");

  var myChart = new Chart(ctx, {
  type: 'pie',
  data: {
      labels: labels,
      datasets: [{
          label: '# of Votes',
          data: howMany,
          backgroundColor: backColor,
          borderColor: backColor,
          borderWidth: 1
      }]
  },
  options:{
    rotation: 0.5 * Math.PI
  }
});

</script>

</body>

</html>
