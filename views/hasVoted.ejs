<% include partials/header %>

<% var test = (foundPoll); %>
<% var dataArray = dataArray; %>

<div class="text-center">
  <h1><%= foundPoll.pollName %></h1>
  <p>
    Some random description about <%= foundPoll.pollName %>
  </p>
  <h2>You Have Voted For: <strong><em><%= storedCookie %></strong></em></h2>
  </div>

  <script type="text/javascript">
  window.onresize = function(){
       drawChart();
   };

   window.onload = function(){
       drawChart();
   };
  // Load the Visualization API and the corechart package.
  google.charts.load('current', {'packages':['corechart']});

  // Set a callback to run when the Google Visualization API is loaded.
  google.charts.setOnLoadCallback(drawChart);

  // Callback that creates and populates a data table,
  // instantiates the pie chart, passes in the data and
  // draws it.
  function drawChart() {

    var foundPoll = <%- JSON.stringify(test) %>;

    // Create the data table.
    var data = new google.visualization.DataTable();
    data.addColumn('string', foundPoll.pollName);
    data.addColumn('number', 'Percentage');

    var dataArray = <%- JSON.stringify(dataArray) %>;
    data.addRows(dataArray);
    // Set chart options
    var options = {'title':foundPoll.pollName,
    'width':800,
    'height':800,
    pieHole: 0.4,
    is3D: true,
    legend: {
      position: 'top'
    }
    };

  // Instantiate and draw our chart, passing in some options.
  var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
  chart.draw(data, options);
}
</script>


<div class="container text-center">
      <div id='chart_div' class='voted-graph' align='center'>

      </div>
</div>




  <% include partials/footer %>
